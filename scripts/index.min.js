
(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){let Footer=require('./modules/footer');let RenderGoods=require('./modules/render-goods');let Searching=require('./modules/searching');let AssideShowHide=require('./modules/show-asside');let Clock=require('./modules/clock');let Calculations=require('./modules/calculations');let Weather=require('./modules/weather');document.addEventListener('DOMContentLoaded',()=>{new Clock();new Weather();new AssideShowHide();new Footer(".main-section__footer").addLicence();$('select').formSelect();new RenderGoods().getGoods();new RenderGoods().init();new Searching();new Calculations().init();})},{"./modules/calculations":2,"./modules/clock":3,"./modules/footer":4,"./modules/render-goods":10,"./modules/searching":12,"./modules/show-asside":13,"./modules/weather":14}],2:[function(require,module,exports){class Calculations{constructor(){this.container=document.querySelector('.calculations');this.showCalcBtn=document.querySelector('.calculate-btn');this.closeCalcBtn=document.querySelector('.show');this.inputRadiusDown=document.querySelector('#radius-down');this.inputRadiusUp=document.querySelector('#radius-up');this.inputHeight=document.querySelector('#height');this.result=document.querySelector('.result');this.calculateBtn=document.querySelector('.calculate');}
init(){this.showCalcBtn.addEventListener('click',()=>this.openCalculations());this.closeCalcBtn.addEventListener('click',()=>this.closeCalculations());this.calculateBtn.addEventListener('click',()=>this.getCalculations());}
openCalculations(){this.container.style.top='0';this.container.style.filter='drop-shadow(0 0 3px rgba(0, 0, 0, 0.7))';this.status='show';}
closeCalculations(){this.container.style.top='-455px';this.container.style.filter='drop-shadow(0 0 0 rgba(0, 0, 0, 0.0))';this.status='hide';this.result.style.display='none';this.inputRadiusDown.value='';this.inputRadiusUp.value='';this.inputHeight.value='';M.updateTextFields();}
getCalculations(){let inputRadiusDown=document.querySelector('#radius-down');let inputRadiusUp=document.querySelector('#radius-up');let inputHeight=document.querySelector('#height');let resultOut=document.querySelector('.result');let result;let final;result=1/3*Math.PI*inputHeight.value*(Math.pow(inputRadiusDown.value,2)+
inputRadiusDown.value*inputRadiusUp.value+Math.pow(inputRadiusUp.value,2));final=(result/1000).toFixed(2);resultOut.innerHTML=`Объём: ${final} л.`;this.inputRadiusDown.value='';this.inputRadiusUp.value='';this.inputHeight.value='';M.updateTextFields();resultOut.style.display='flex';}}
module.exports=Calculations;},{}],3:[function(require,module,exports){class Clock{constructor(){this.init()}
init(){setInterval(function(){let seconds=new Date().getSeconds();document.getElementById("seconds").innerHTML=(seconds<10?'0':'')+seconds;let minutes=new Date().getMinutes();document.getElementById("minutes").innerHTML=(minutes<10?'0':'')+minutes;let hours=new Date().getHours();document.getElementById("hours").innerHTML=(hours<10?'0':'')+hours;let some=document.querySelector('.date');const date=new Date();const today=new Date().toLocaleString().slice(0,2);let days=['Воскресенье','Понедельник','Вторник','Среда','Четверг','Пятница','Суббота'];let d=new Date();let n=d.getDay();const monthName=date.toLocaleString('default',{month:'short'});some.innerHTML=`${today} ${monthName} ${days[n]}`;let clck=document.querySelector('.clock');let dte=document.querySelector('.date');clck.style.display='flex';dte.style.display='flex';},1000);}}
module.exports=Clock;},{}],4:[function(require,module,exports){class Footer{constructor(element){this.footer=document.querySelector(element);}
addLicence(){let date=new Date();let year=date.toLocaleDateString().slice(6);this.footer.textContent=`© TNP Sales 2023 - ${year}`;}}
module.exports=Footer;},{}],5:[function(require,module,exports){class IndexChartsAvailbl{constructor(){this.init();}
init(){let dataArr=[...JSON.parse(sessionStorage.getItem('data'))];let availableGoods;let unAvailableoldGoods;let finalData=[];availableGoods=dataArr.filter(e=>parseInt(e.Available)>0).length;finalData.push(availableGoods);unAvailableoldGoods=dataArr.filter(e=>parseInt(e.Available)==0).length;finalData.push(unAvailableoldGoods);let title=[`Есть (${availableGoods} поз.)`,`Нет (${unAvailableoldGoods} поз.)`]
const data={labels:title,datasets:[{data:finalData,backgroundColor:['rgba(153, 102, 255, 0.8)','rgba(54, 162, 235, 0.8)',],hoverOffset:4}]};const config={type:'doughnut',data:data,options:{plugins:{subtitle:{display:true,text:'Соотношение товара с остатком и без остатка',font:{weight:'bold'}}},},};const myChartAvailbl=new Chart(document.getElementById('myChartAvailbl'),config);}}
module.exports=IndexChartsAvailbl;},{}],6:[function(require,module,exports){class IndexChartsNew{constructor(){this.init();}
init(){let dataArr=[...JSON.parse(sessionStorage.getItem('data'))];let newGoods;let oldGoods;let finalData=[];newGoods=dataArr.filter(e=>e.Status=='new').length;finalData.push(newGoods);oldGoods=dataArr.filter(e=>e.Status=='old').length;finalData.push(oldGoods);let title=[`Новый (${newGoods} шт)`,`Старый (${oldGoods} шт)`]
const data={type:'scatter',labels:title,datasets:[{data:finalData,backgroundColor:['rgba(255,0,0,0.8)','rgba(128, 128, 128,0.8)',],hoverOffset:4}]};const config={type:'doughnut',data:data,options:{plugins:{subtitle:{display:true,text:'Соотношение нового и старого товара',font:{weight:'bold'}}},},};const myChartNew=new Chart(document.getElementById('myChartNew'),config);}}
module.exports=IndexChartsNew;},{}],7:[function(require,module,exports){class IndexChartsReserved{constructor(){this.init();}
init(){let dataArr=[...JSON.parse(sessionStorage.getItem('data'))];let availableGoods;let reservedGoods;let finalData=[];for(let i=0;i<dataArr.length;i++){availableGoods=dataArr.filter(e=>e.Available).reduce(function(sum,current){return sum+parseInt(current.Available);},0)}
for(let i=0;i<dataArr.length;i++){reservedGoods=dataArr.filter(e=>e.Reserved).reduce(function(sum,current){return sum+parseInt(current.Reserved);},0)}
finalData.push(reservedGoods);finalData.push(availableGoods);let title=[`Резерв (${reservedGoods.toLocaleString()} шт.)`,`Доступно (${availableGoods.toLocaleString()} шт.)`]
const data={labels:title,datasets:[{data:finalData,backgroundColor:['rgba(255,137,36,0.8)','rgba(28,175,0,0.8)',],hoverOffset:4}]};const config={type:'doughnut',data:data,options:{plugins:{subtitle:{display:true,text:'Соотношение доступного и зарезервированного товара',font:{weight:'bold'}}},},};const myChartReserved=new Chart(document.getElementById('myChartReserved'),config);}}
module.exports=IndexChartsReserved;},{}],8:[function(require,module,exports){class IndexCharts{constructor(){this.init();}
init(){let categoriesBtn=document.querySelector('.index-chart-btn4');let tmBtn=document.querySelector('.index-chart-btn3');let availableBtn=document.querySelector('.index-chart-btn2');let withCountBtn=document.querySelector('.index-chart-btn7');let withoutCountBtn=document.querySelector('.index-chart-btn8');let grantedBtn=document.querySelector('.index-chart-btn6');let reserveBtn=document.querySelector('.index-chart-btn5');let dataArr=[...JSON.parse(sessionStorage.getItem('data'))];let gropeNames=['Кастрюли','Сковородки','Ножи','Крышки','Набор посуды','Ёмкости','Контейнера','Посуда','Стекло','Столовые приборы','Тёрки и точилки','Термосы и термокружки','Кухонные доски','Кухонные принадлежности','Хлебница','Форма','Миски','Подставки','Чашки','Чайно-кофейная группа','Гриль, шампура','Освещение','Текстиль','Хоз.группа','Другое'];let finalData=[];for(let i=0;i<gropeNames.length;i++){finalData.push({grope:gropeNames[i],count:dataArr.filter(e=>e.Grope==gropeNames[i]).length});}
finalData.sort((a,b)=>a.count-b.count).reverse();let grope=[];let count=[];for(let i=0;i<finalData.length;i++){grope.push(finalData[i].grope);count.push(finalData[i].count);}
let title=`Всего ${dataArr.length} позиций`;const data={labels:grope,datasets:[{label:title,data:count,backgroundColor:['rgba(255, 99, 132, 0.2)','rgba(255, 159, 64, 0.2)','rgba(255, 205, 86, 0.2)','rgba(75, 192, 192, 0.2)','rgba(54, 162, 235, 0.2)','rgba(153, 102, 255, 0.2)','rgba(201, 203, 207, 0.2)','rgba(255, 99, 132, 0.2)','rgba(255, 159, 64, 0.2)','rgba(255, 205, 86, 0.2)','rgba(75, 192, 192, 0.2)','rgba(54, 162, 235, 0.2)','rgba(153, 102, 255, 0.2)','rgba(201, 203, 207, 0.2)','rgba(255, 99, 132, 0.2)','rgba(255, 159, 64, 0.2)','rgba(255, 205, 86, 0.2)','rgba(75, 192, 192, 0.2)','rgba(54, 162, 235, 0.2)','rgba(153, 102, 255, 0.2)','rgba(201, 203, 207, 0.2)','rgba(255, 99, 132, 0.2)','rgba(255, 159, 64, 0.2)','rgba(255, 205, 86, 0.2)','rgba(75, 192, 192, 0.2)',],borderColor:['rgb(255, 99, 132)','rgb(255, 159, 64)','rgb(255, 205, 86)','rgb(75, 192, 192)','rgb(54, 162, 235)','rgb(153, 102, 255)','rgb(201, 203, 207)','rgb(255, 99, 132)','rgb(255, 159, 64)','rgb(255, 205, 86)','rgb(75, 192, 192)','rgb(54, 162, 235)','rgb(153, 102, 255)','rgb(201, 203, 207)','rgb(255, 99, 132)','rgb(255, 159, 64)','rgb(255, 205, 86)','rgb(75, 192, 192)','rgb(54, 162, 235)','rgb(153, 102, 255)','rgb(201, 203, 207)','rgb(255, 99, 132)','rgb(255, 159, 64)','rgb(255, 205, 86)','rgb(75, 192, 192)',],borderWidth:1}]};const config={type:'bar',data:data,options:{plugins:{legend:{labels:{font:{}}},subtitle:{display:true,text:'Товар в разрезе категорий',font:{weight:'bold'}}},scales:{y:{beginAtZero:true}}},};let myChartAll=new Chart(document.getElementById('myChartAll'),config);categoriesBtn.addEventListener('click',()=>{myChartAll.destroy();let dataArr=[...JSON.parse(sessionStorage.getItem('data'))];let gropeNames=['Кастрюли','Сковородки','Ножи','Крышки','Набор посуды','Ёмкости','Контейнера','Посуда','Стекло','Столовые приборы','Тёрки и точилки','Термосы и термокружки','Кухонные доски','Кухонные принадлежности','Хлебница','Форма','Миски','Подставки','Чашки','Чайно-кофейная группа','Гриль, шампура','Освещение','Текстиль','Хоз.группа','Другое'];let finalData=[];for(let i=0;i<gropeNames.length;i++){finalData.push(dataArr.filter(e=>e.Grope==gropeNames[i]).length);}
let title=`Всего ${dataArr.length} позиций`;const data={labels:grope,datasets:[{label:title,data:count,backgroundColor:['rgba(255, 99, 132, 0.2)','rgba(255, 159, 64, 0.2)','rgba(255, 205, 86, 0.2)','rgba(75, 192, 192, 0.2)','rgba(54, 162, 235, 0.2)','rgba(153, 102, 255, 0.2)','rgba(201, 203, 207, 0.2)','rgba(255, 99, 132, 0.2)','rgba(255, 159, 64, 0.2)','rgba(255, 205, 86, 0.2)','rgba(75, 192, 192, 0.2)','rgba(54, 162, 235, 0.2)','rgba(153, 102, 255, 0.2)','rgba(201, 203, 207, 0.2)','rgba(255, 99, 132, 0.2)','rgba(255, 159, 64, 0.2)','rgba(255, 205, 86, 0.2)','rgba(75, 192, 192, 0.2)','rgba(54, 162, 235, 0.2)','rgba(153, 102, 255, 0.2)','rgba(201, 203, 207, 0.2)','rgba(255, 99, 132, 0.2)','rgba(255, 159, 64, 0.2)','rgba(255, 205, 86, 0.2)','rgba(75, 192, 192, 0.2)',],borderColor:['rgb(255, 99, 132)','rgb(255, 159, 64)','rgb(255, 205, 86)','rgb(75, 192, 192)','rgb(54, 162, 235)','rgb(153, 102, 255)','rgb(201, 203, 207)','rgb(255, 99, 132)','rgb(255, 159, 64)','rgb(255, 205, 86)','rgb(75, 192, 192)','rgb(54, 162, 235)','rgb(153, 102, 255)','rgb(201, 203, 207)','rgb(255, 99, 132)','rgb(255, 159, 64)','rgb(255, 205, 86)','rgb(75, 192, 192)','rgb(54, 162, 235)','rgb(153, 102, 255)','rgb(201, 203, 207)','rgb(255, 99, 132)','rgb(255, 159, 64)','rgb(255, 205, 86)','rgb(75, 192, 192)',],borderWidth:1}]};const config={type:'bar',data:data,options:{plugins:{legend:{labels:{font:{}}},subtitle:{display:true,text:'Товар в разрезе категорий',font:{weight:'bold'}}},scales:{y:{beginAtZero:true}}},};myChartAll=new Chart(document.getElementById('myChartAll'),config);});tmBtn.addEventListener('click',()=>{myChartAll.destroy();let dataArr=[...JSON.parse(sessionStorage.getItem('data'))];let gropeNames=['Krauff','Helfer','Oselya','LAV','Keramia','Ritter','Martex','Miorro','Mitsui','Libbey','Viola','Lorenzzo','Hostel','Lotti','Horeca'];let finalData=[];for(let i=0;i<gropeNames.length;i++){finalData.push({tm:gropeNames[i],count:dataArr.filter(e=>e.TradeMark==gropeNames[i]).length});}
finalData.sort((a,b)=>a.count-b.count).reverse();let tm=[];let count=[];for(let i=0;i<finalData.length;i++){tm.push(finalData[i].tm);count.push(finalData[i].count);}
let title=`Всего ${gropeNames.length} торговых марок`;const data={labels:tm,datasets:[{label:title,data:count,backgroundColor:['rgba(255, 99, 132, 0.2)','rgba(255, 159, 64, 0.2)','rgba(255, 205, 86, 0.2)','rgba(75, 192, 192, 0.2)','rgba(54, 162, 235, 0.2)','rgba(153, 102, 255, 0.2)','rgba(201, 203, 207, 0.2)','rgba(255, 99, 132, 0.2)','rgba(255, 159, 64, 0.2)','rgba(255, 205, 86, 0.2)','rgba(75, 192, 192, 0.2)','rgba(54, 162, 235, 0.2)','rgba(153, 102, 255, 0.2)','rgba(201, 203, 207, 0.2)','rgba(255, 99, 132, 0.2)','rgba(255, 159, 64, 0.2)','rgba(255, 205, 86, 0.2)','rgba(75, 192, 192, 0.2)','rgba(54, 162, 235, 0.2)','rgba(153, 102, 255, 0.2)','rgba(201, 203, 207, 0.2)','rgba(255, 99, 132, 0.2)','rgba(255, 159, 64, 0.2)','rgba(255, 205, 86, 0.2)','rgba(75, 192, 192, 0.2)',],borderColor:['rgb(255, 99, 132)','rgb(255, 159, 64)','rgb(255, 205, 86)','rgb(75, 192, 192)','rgb(54, 162, 235)','rgb(153, 102, 255)','rgb(201, 203, 207)','rgb(255, 99, 132)','rgb(255, 159, 64)','rgb(255, 205, 86)','rgb(75, 192, 192)','rgb(54, 162, 235)','rgb(153, 102, 255)','rgb(201, 203, 207)','rgb(255, 99, 132)','rgb(255, 159, 64)','rgb(255, 205, 86)','rgb(75, 192, 192)','rgb(54, 162, 235)','rgb(153, 102, 255)','rgb(201, 203, 207)','rgb(255, 99, 132)','rgb(255, 159, 64)','rgb(255, 205, 86)','rgb(75, 192, 192)',],borderWidth:1}]};const config={type:'bar',data:data,options:{plugins:{legend:{labels:{font:{}}},subtitle:{display:true,text:'Товар в разрезе торговых марок',font:{weight:'bold'}}},scales:{y:{beginAtZero:true}}},};myChartAll=new Chart(document.getElementById('myChartAll'),config);});availableBtn.addEventListener('click',()=>{myChartAll.destroy();let dataArr=[...JSON.parse(sessionStorage.getItem('data'))];let gropeNames=['Кастрюли','Сковородки','Ножи','Крышки','Набор посуды','Ёмкости','Контейнера','Посуда','Стекло','Столовые приборы','Тёрки и точилки','Термосы и термокружки','Кухонные доски','Кухонные принадлежности','Хлебница','Форма','Миски','Подставки','Чашки','Чайно-кофейная группа','Гриль, шампура','Освещение','Текстиль','Хоз.группа','Другое'];let finalData=[];let fullCountAvailable=dataArr.reduce(function(sum,current){return sum+parseInt(current.Available);},0);let fullCountReserv=dataArr.reduce(function(sum,current){return sum+parseInt(current.Reserved);},0);let fullCount=fullCountAvailable+fullCountReserv;for(let i=0;i<gropeNames.length;i++){finalData.push({categories:gropeNames[i],available:dataArr.filter(e=>e.Grope==gropeNames[i]).reduce(function(sum,current){if(current.Grope==gropeNames[i]){return sum+parseInt(current.Reserved)+parseInt(current.Available);}},0)})}
finalData.sort((a,b)=>a.available-b.available).reverse();let categories=[];let available=[];for(let i=0;i<finalData.length;i++){categories.push(finalData[i].categories);available.push(finalData[i].available);}
let title=`Всего ${fullCount.toLocaleString()} штук`;const data={labels:categories,datasets:[{label:title,data:available,backgroundColor:['rgba(255, 99, 132, 0.2)','rgba(255, 159, 64, 0.2)','rgba(255, 205, 86, 0.2)','rgba(75, 192, 192, 0.2)','rgba(54, 162, 235, 0.2)','rgba(153, 102, 255, 0.2)','rgba(201, 203, 207, 0.2)','rgba(255, 99, 132, 0.2)','rgba(255, 159, 64, 0.2)','rgba(255, 205, 86, 0.2)','rgba(75, 192, 192, 0.2)','rgba(54, 162, 235, 0.2)','rgba(153, 102, 255, 0.2)','rgba(201, 203, 207, 0.2)','rgba(255, 99, 132, 0.2)','rgba(255, 159, 64, 0.2)','rgba(255, 205, 86, 0.2)','rgba(75, 192, 192, 0.2)','rgba(54, 162, 235, 0.2)','rgba(153, 102, 255, 0.2)','rgba(201, 203, 207, 0.2)','rgba(255, 99, 132, 0.2)','rgba(255, 159, 64, 0.2)','rgba(255, 205, 86, 0.2)','rgba(75, 192, 192, 0.2)',],borderColor:['rgb(255, 99, 132)','rgb(255, 159, 64)','rgb(255, 205, 86)','rgb(75, 192, 192)','rgb(54, 162, 235)','rgb(153, 102, 255)','rgb(201, 203, 207)','rgb(255, 99, 132)','rgb(255, 159, 64)','rgb(255, 205, 86)','rgb(75, 192, 192)','rgb(54, 162, 235)','rgb(153, 102, 255)','rgb(201, 203, 207)','rgb(255, 99, 132)','rgb(255, 159, 64)','rgb(255, 205, 86)','rgb(75, 192, 192)','rgb(54, 162, 235)','rgb(153, 102, 255)','rgb(201, 203, 207)','rgb(255, 99, 132)','rgb(255, 159, 64)','rgb(255, 205, 86)','rgb(75, 192, 192)',],borderWidth:1}]};const config={type:'bar',data:data,options:{plugins:{legend:{labels:{font:{}}},subtitle:{display:true,text:'Доступный и зарезервированный товар в разрезе категорий',font:{weight:'bold'}}},scales:{y:{beginAtZero:true}}},};myChartAll=new Chart(document.getElementById('myChartAll'),config);});withCountBtn.addEventListener('click',()=>{myChartAll.destroy();let dataArr=[...JSON.parse(sessionStorage.getItem('data'))];let gropeNames=['Кастрюли','Сковородки','Ножи','Крышки','Набор посуды','Ёмкости','Контейнера','Посуда','Стекло','Столовые приборы','Тёрки и точилки','Термосы и термокружки','Кухонные доски','Кухонные принадлежности','Хлебница','Форма','Миски','Подставки','Чашки','Чайно-кофейная группа','Гриль, шампура','Освещение','Текстиль','Хоз.группа','Другое'];let finalData=[];let tempArr=dataArr.filter(e=>parseInt(e.Available)>0);let tempCount=tempArr.length;for(let i=0;i<gropeNames.length;i++){finalData.push({categories:gropeNames[i],count:tempArr.filter(e=>e.Grope==gropeNames[i]).length})}
finalData.sort((a,b)=>a.count-b.count).reverse();let categories=[];let available=[];for(let i=0;i<finalData.length;i++){categories.push(finalData[i].categories);available.push(finalData[i].count);}
let title=`Всего ${tempCount.toLocaleString()} позиций с остатком`;const data={labels:categories,datasets:[{label:title,data:available,backgroundColor:['rgba(255, 99, 132, 0.2)','rgba(255, 159, 64, 0.2)','rgba(255, 205, 86, 0.2)','rgba(75, 192, 192, 0.2)','rgba(54, 162, 235, 0.2)','rgba(153, 102, 255, 0.2)','rgba(201, 203, 207, 0.2)','rgba(255, 99, 132, 0.2)','rgba(255, 159, 64, 0.2)','rgba(255, 205, 86, 0.2)','rgba(75, 192, 192, 0.2)','rgba(54, 162, 235, 0.2)','rgba(153, 102, 255, 0.2)','rgba(201, 203, 207, 0.2)','rgba(255, 99, 132, 0.2)','rgba(255, 159, 64, 0.2)','rgba(255, 205, 86, 0.2)','rgba(75, 192, 192, 0.2)','rgba(54, 162, 235, 0.2)','rgba(153, 102, 255, 0.2)','rgba(201, 203, 207, 0.2)','rgba(255, 99, 132, 0.2)','rgba(255, 159, 64, 0.2)','rgba(255, 205, 86, 0.2)','rgba(75, 192, 192, 0.2)',],borderColor:['rgb(255, 99, 132)','rgb(255, 159, 64)','rgb(255, 205, 86)','rgb(75, 192, 192)','rgb(54, 162, 235)','rgb(153, 102, 255)','rgb(201, 203, 207)','rgb(255, 99, 132)','rgb(255, 159, 64)','rgb(255, 205, 86)','rgb(75, 192, 192)','rgb(54, 162, 235)','rgb(153, 102, 255)','rgb(201, 203, 207)','rgb(255, 99, 132)','rgb(255, 159, 64)','rgb(255, 205, 86)','rgb(75, 192, 192)','rgb(54, 162, 235)','rgb(153, 102, 255)','rgb(201, 203, 207)','rgb(255, 99, 132)','rgb(255, 159, 64)','rgb(255, 205, 86)','rgb(75, 192, 192)',],borderWidth:1}]};const config={type:'bar',data:data,options:{plugins:{legend:{labels:{font:{}}},subtitle:{display:true,text:'Товар с остатком по категориям',font:{weight:'bold'}}},scales:{y:{beginAtZero:true}}},};myChartAll=new Chart(document.getElementById('myChartAll'),config);});withoutCountBtn.addEventListener('click',()=>{myChartAll.destroy();let dataArr=[...JSON.parse(sessionStorage.getItem('data'))];let gropeNames=['Кастрюли','Сковородки','Ножи','Крышки','Набор посуды','Ёмкости','Контейнера','Посуда','Стекло','Столовые приборы','Тёрки и точилки','Термосы и термокружки','Кухонные доски','Кухонные принадлежности','Хлебница','Форма','Миски','Подставки','Чашки','Чайно-кофейная группа','Гриль, шампура','Освещение','Текстиль','Хоз.группа','Другое'];let finalData=[];let tempArr=dataArr.filter(e=>parseInt(e.Available)==0);let tempCount=tempArr.length;for(let i=0;i<gropeNames.length;i++){finalData.push({categories:gropeNames[i],count:tempArr.filter(e=>e.Grope==gropeNames[i]).length})}
finalData.sort((a,b)=>a.count-b.count).reverse();let categories=[];let available=[];for(let i=0;i<finalData.length;i++){categories.push(finalData[i].categories);available.push(finalData[i].count);}
let title=`Всего ${tempCount.toLocaleString()} позиций без остатка`;const data={labels:categories,datasets:[{label:title,data:available,backgroundColor:['rgba(255, 99, 132, 0.2)','rgba(255, 159, 64, 0.2)','rgba(255, 205, 86, 0.2)','rgba(75, 192, 192, 0.2)','rgba(54, 162, 235, 0.2)','rgba(153, 102, 255, 0.2)','rgba(201, 203, 207, 0.2)','rgba(255, 99, 132, 0.2)','rgba(255, 159, 64, 0.2)','rgba(255, 205, 86, 0.2)','rgba(75, 192, 192, 0.2)','rgba(54, 162, 235, 0.2)','rgba(153, 102, 255, 0.2)','rgba(201, 203, 207, 0.2)','rgba(255, 99, 132, 0.2)','rgba(255, 159, 64, 0.2)','rgba(255, 205, 86, 0.2)','rgba(75, 192, 192, 0.2)','rgba(54, 162, 235, 0.2)','rgba(153, 102, 255, 0.2)','rgba(201, 203, 207, 0.2)','rgba(255, 99, 132, 0.2)','rgba(255, 159, 64, 0.2)','rgba(255, 205, 86, 0.2)','rgba(75, 192, 192, 0.2)',],borderColor:['rgb(255, 99, 132)','rgb(255, 159, 64)','rgb(255, 205, 86)','rgb(75, 192, 192)','rgb(54, 162, 235)','rgb(153, 102, 255)','rgb(201, 203, 207)','rgb(255, 99, 132)','rgb(255, 159, 64)','rgb(255, 205, 86)','rgb(75, 192, 192)','rgb(54, 162, 235)','rgb(153, 102, 255)','rgb(201, 203, 207)','rgb(255, 99, 132)','rgb(255, 159, 64)','rgb(255, 205, 86)','rgb(75, 192, 192)','rgb(54, 162, 235)','rgb(153, 102, 255)','rgb(201, 203, 207)','rgb(255, 99, 132)','rgb(255, 159, 64)','rgb(255, 205, 86)','rgb(75, 192, 192)',],borderWidth:1}]};const config={type:'bar',data:data,options:{plugins:{legend:{labels:{font:{}}},subtitle:{display:true,text:'Товар без остатка по категориям',font:{weight:'bold'}}},scales:{y:{beginAtZero:true}}},};myChartAll=new Chart(document.getElementById('myChartAll'),config);});grantedBtn.addEventListener('click',()=>{myChartAll.destroy();let dataArr=[...JSON.parse(sessionStorage.getItem('data'))];let gropeNames=['Кастрюли','Сковородки','Ножи','Крышки','Набор посуды','Ёмкости','Контейнера','Посуда','Стекло','Столовые приборы','Тёрки и точилки','Термосы и термокружки','Кухонные доски','Кухонные принадлежности','Хлебница','Форма','Миски','Подставки','Чашки','Чайно-кофейная группа','Гриль, шампура','Освещение','Текстиль','Хоз.группа','Другое'];let finalData=[];let fullCount=dataArr.reduce(function(sum,current){return sum+parseInt(current.Available);},0);for(let i=0;i<gropeNames.length;i++){finalData.push({categories:gropeNames[i],available:dataArr.filter(e=>e.Grope==gropeNames[i]).reduce(function(sum,current){if(current.Grope==gropeNames[i]){return sum+parseInt(current.Available);}},0)})}
finalData.sort((a,b)=>a.available-b.available).reverse();let categories=[];let available=[];for(let i=0;i<finalData.length;i++){categories.push(finalData[i].categories);available.push(finalData[i].available);}
let title=`Всего ${fullCount.toLocaleString()} штук доступно`;const data={labels:categories,datasets:[{label:title,data:available,backgroundColor:['rgba(255, 99, 132, 0.2)','rgba(255, 159, 64, 0.2)','rgba(255, 205, 86, 0.2)','rgba(75, 192, 192, 0.2)','rgba(54, 162, 235, 0.2)','rgba(153, 102, 255, 0.2)','rgba(201, 203, 207, 0.2)','rgba(255, 99, 132, 0.2)','rgba(255, 159, 64, 0.2)','rgba(255, 205, 86, 0.2)','rgba(75, 192, 192, 0.2)','rgba(54, 162, 235, 0.2)','rgba(153, 102, 255, 0.2)','rgba(201, 203, 207, 0.2)','rgba(255, 99, 132, 0.2)','rgba(255, 159, 64, 0.2)','rgba(255, 205, 86, 0.2)','rgba(75, 192, 192, 0.2)','rgba(54, 162, 235, 0.2)','rgba(153, 102, 255, 0.2)','rgba(201, 203, 207, 0.2)','rgba(255, 99, 132, 0.2)','rgba(255, 159, 64, 0.2)','rgba(255, 205, 86, 0.2)','rgba(75, 192, 192, 0.2)',],borderColor:['rgb(255, 99, 132)','rgb(255, 159, 64)','rgb(255, 205, 86)','rgb(75, 192, 192)','rgb(54, 162, 235)','rgb(153, 102, 255)','rgb(201, 203, 207)','rgb(255, 99, 132)','rgb(255, 159, 64)','rgb(255, 205, 86)','rgb(75, 192, 192)','rgb(54, 162, 235)','rgb(153, 102, 255)','rgb(201, 203, 207)','rgb(255, 99, 132)','rgb(255, 159, 64)','rgb(255, 205, 86)','rgb(75, 192, 192)','rgb(54, 162, 235)','rgb(153, 102, 255)','rgb(201, 203, 207)','rgb(255, 99, 132)','rgb(255, 159, 64)','rgb(255, 205, 86)','rgb(75, 192, 192)',],borderWidth:1}]};const config={type:'bar',data:data,options:{plugins:{legend:{labels:{font:{}}},subtitle:{display:true,text:'Доступные остатки товара по категориям',font:{weight:'bold'}}},scales:{y:{beginAtZero:true}}},};myChartAll=new Chart(document.getElementById('myChartAll'),config);});reserveBtn.addEventListener('click',()=>{myChartAll.destroy();let dataArr=[...JSON.parse(sessionStorage.getItem('data'))];let gropeNames=['Кастрюли','Сковородки','Ножи','Крышки','Набор посуды','Ёмкости','Контейнера','Посуда','Стекло','Столовые приборы','Тёрки и точилки','Термосы и термокружки','Кухонные доски','Кухонные принадлежности','Хлебница','Форма','Миски','Подставки','Чашки','Чайно-кофейная группа','Гриль, шампура','Освещение','Текстиль','Хоз.группа','Другое'];let finalData=[];let fullCount=dataArr.reduce(function(sum,current){return sum+parseInt(current.Reserved);},0);for(let i=0;i<gropeNames.length;i++){finalData.push({categories:gropeNames[i],available:dataArr.filter(e=>e.Grope==gropeNames[i]).reduce(function(sum,current){if(current.Grope==gropeNames[i]){return sum+parseInt(current.Reserved);}},0)})}
finalData.sort((a,b)=>a.available-b.available).reverse();let categories=[];let available=[];for(let i=0;i<finalData.length;i++){categories.push(finalData[i].categories);available.push(finalData[i].available);}
let title=`Всего ${fullCount.toLocaleString()} штук в резерве`;const data={labels:categories,datasets:[{label:title,data:available,backgroundColor:['rgba(255, 99, 132, 0.2)','rgba(255, 159, 64, 0.2)','rgba(255, 205, 86, 0.2)','rgba(75, 192, 192, 0.2)','rgba(54, 162, 235, 0.2)','rgba(153, 102, 255, 0.2)','rgba(201, 203, 207, 0.2)','rgba(255, 99, 132, 0.2)','rgba(255, 159, 64, 0.2)','rgba(255, 205, 86, 0.2)','rgba(75, 192, 192, 0.2)','rgba(54, 162, 235, 0.2)','rgba(153, 102, 255, 0.2)','rgba(201, 203, 207, 0.2)','rgba(255, 99, 132, 0.2)','rgba(255, 159, 64, 0.2)','rgba(255, 205, 86, 0.2)','rgba(75, 192, 192, 0.2)','rgba(54, 162, 235, 0.2)','rgba(153, 102, 255, 0.2)','rgba(201, 203, 207, 0.2)','rgba(255, 99, 132, 0.2)','rgba(255, 159, 64, 0.2)','rgba(255, 205, 86, 0.2)','rgba(75, 192, 192, 0.2)',],borderColor:['rgb(255, 99, 132)','rgb(255, 159, 64)','rgb(255, 205, 86)','rgb(75, 192, 192)','rgb(54, 162, 235)','rgb(153, 102, 255)','rgb(201, 203, 207)','rgb(255, 99, 132)','rgb(255, 159, 64)','rgb(255, 205, 86)','rgb(75, 192, 192)','rgb(54, 162, 235)','rgb(153, 102, 255)','rgb(201, 203, 207)','rgb(255, 99, 132)','rgb(255, 159, 64)','rgb(255, 205, 86)','rgb(75, 192, 192)','rgb(54, 162, 235)','rgb(153, 102, 255)','rgb(201, 203, 207)','rgb(255, 99, 132)','rgb(255, 159, 64)','rgb(255, 205, 86)','rgb(75, 192, 192)',],borderWidth:1}]};const config={type:'bar',data:data,options:{plugins:{legend:{labels:{font:{}}},subtitle:{display:true,text:'Зарезервированные остатки товара по категориям',font:{weight:'bold'}}},scales:{y:{beginAtZero:true}}},};myChartAll=new Chart(document.getElementById('myChartAll'),config);});}}
module.exports=IndexCharts;},{}],9:[function(require,module,exports){class Login{constructor(){this.body=document.querySelector('body');this.loginWindow=document.querySelector('.log__window');this.loginWindowInput=document.querySelector('#password');this.loginWindowAccept=document.querySelector('.window__login-accept-btn');this.loginWindowReject=document.querySelector('.window__login-reject-btn');this.loginBtn=document.querySelector('.enter-cart-btn');this.AwayBtn=document.querySelector('.back-cart-btn');this.confData=`${Math.sqrt(4)}${Math.sqrt(9)}`+new Date().getFullYear().toString().slice(2);this.init();}
init(){let checkLogin=localStorage.getItem('auth');if(checkLogin=='0'||checkLogin==null){this.loginBtn.style.display='block';this.AwayBtn.style.display='none';}else if(checkLogin=='1'){this.loginBtn.style.display='none';this.AwayBtn.style.display='block';}
this.loginBtn.addEventListener('click',()=>this.logIn());this.AwayBtn.addEventListener('click',()=>this.logOut());this.loginWindowAccept.addEventListener('click',()=>this.accept(this.loginWindowInput.value));this.loginWindowReject.addEventListener('click',()=>this.reject());}
logIn(){this.loginWindow.style.display='flex';setTimeout(()=>{this.loginWindow.style.opacity='1';this.body.style.overflow='hidden';},200)}
logOut(){Swal.fire({title:"Вы уверены?",icon:"warning",showCancelButton:true,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Да, выйти!",cancelButtonText:"Отмена"}).then((result)=>{if(result.isConfirmed){localStorage.setItem('auth','0');location.reload();}else{return}});}
accept(input){if(input.trim()==this.confData){Swal.fire({icon:"success",title:"Авторизация успешна!",showConfirmButton:false,timer:1500});setTimeout(()=>{localStorage.setItem('auth','1');this.loginBtn.style.display='none';this.AwayBtn.style.display='block';this.loginWindow.style.opacity='0';this.body.style.overflow='';setTimeout(()=>{this.loginWindow.style.display='none';this.loginWindowInput.value='';M.updateTextFields();},200);},1500);}else if(input.trim()!=this.confData){this.loginWindowInput.value='';M.updateTextFields();Swal.fire({icon:"error",title:"Введен неверный код!",showConfirmButton:false,timer:1500});return}}
reject(){this.loginWindow.style.opacity='0';this.body.style.overflow='';setTimeout(()=>{this.loginWindow.style.display='none';this.loginWindowInput.value='';M.updateTextFields();},200)}}
module.exports=Login;},{}],10:[function(require,module,exports){let IndexCharts=require('./index-charts');let IndexChartsNew=require('./index-charts-new');let IndexChartsAvailbl=require('./index-charts-availbl');let IndexChartsReserved=require('./index-charts-reserved');let Login=require('./login');let ScalePhoto=require('./scale-photo');class RenderGoods{constructor(){this.container=document.querySelector('.main-section__body-container');this.mainSectionBody=document.querySelector('.main-section__body');this.elementSection=document.querySelector('.main-section__body-data');this.updata=document.querySelector('.updata');this.fullInfo=document.querySelector('.main-section__body-full-info');this.loader=document.querySelector('.main-section__body-loader');this.notFound=document.querySelector('.main-section__body-not-found');this.searchBtn=document.querySelector('.search-btn');this.filterBtn=document.querySelector('.filter-btn');this.newsBtn=document.querySelector('.news-btn');this.clearBtn=document.querySelector('.clear-btn');this.getAllBtn=document.querySelector('.get-all-btn');this.logInBtn=document.querySelector('.enter-cart-btn');this.logOutBtn=document.querySelector('.back-cart-btn');this.showCalcBnt=document.querySelector('.calculate-btn');this.sampleLoader=document.querySelector('.loader');}
init(){this.getAllBtn.addEventListener('click',()=>this.getAllGoods());}
getGoods(){this.disabledBtns();this.mainSectionBody.style.boxShadow='none';$.ajax({url:"https://script.google.com/macros/s/AKfycbyJF6zKadOvNqwQaTm60GkUwEHKCIKWcIEISi9P4_nbvmnq-3mqnrn0r92ZTWLw3UEC/exec",method:"get",dataType:"json",success:(data)=>{setTimeout(()=>{this.elementSection.innerHTML='';sessionStorage.setItem('data',JSON.stringify(data.goods));sessionStorage.setItem('current','fifty');let response=data.goods.reverse();let temporaryGoods=[];for(let i=19;i>=0;i--){temporaryGoods.push(response[i])}
let showGoods=temporaryGoods.sort((a,b)=>a.Name>b.Name?1:-1);this.elementSection.append(...showGoods.map(e=>this.createElements(e)));this.loader.style.display='none';this.elementSection.style.display='block';this.updata.style.display='block';this.removeDisabledBtns();let userStatus=sessionStorage.getItem('user');if(userStatus!='stanislav'){this.logInBtn.classList.remove('disabled');}
setTimeout(()=>{let chartAll=document.querySelector('.chart-all');let chartNew=document.querySelector('.chart-new');let search=document.querySelector('.main-section__body-search');this.mainSectionBody.style.boxShadow='0 0 3px rgba(0, 0, 0, 0.3)';new Login();search.style.display='block';chartAll.style.display='block';chartNew.style.display='flex';new IndexCharts();new IndexChartsNew();new IndexChartsAvailbl();new IndexChartsReserved();new ScalePhoto();},100)},500);},error:(err)=>{this.updata.style.display='block';this.elementSection.innerHTML='';this.elementSection.append(`Ошибка загрузки... Обновите страницу!`);this.elementSection.style.textAlign='center';this.elementSection.style.color='red';this.elementSection.style.fontWeight='bold';this.elementSection.style.display='flex';this.elementSection.style.justifyContent='center';this.elementSection.style.alignItems='center';this.elementSection.style.fontSize='25px';this.loader.style.display='none';this.removeDisabledBtns();},});}
getAllGoods(){sessionStorage.setItem('current','all')
this.disabledBtns();this.container.style.backgroundImage='linear-gradient(to bottom, snow, snow)';this.updata.style.display='none';this.elementSection.innerHTML='';this.loader.style.display='flex';this.elementSection.style.display='none';this.fullInfo.style.display='none';this.notFound.style.display='none';this.sampleLoader.style.display='block';setTimeout(()=>{this.elementSection.innerHTML='';let response=JSON.parse(sessionStorage.getItem('data'));response.sort((a,b)=>a.Name>b.Name?1:-1);M.toast({html:`Найдено ${response.length} товаров`,displayLength:1500,classes:'toast'});this.elementSection.append(...response.map(e=>this.createElements(e)));this.loader.style.display='none';this.elementSection.style.display='block';this.removeDisabledBtns();this.container.style.backgroundImage='linear-gradient(to bottom, #f3f4fa, #e9edff)';this.loader.style.display='none';this.updata.style.display='block';this.elementSection.style.display='block';this.notFound.style.display='none'},500);}
createElements(data){let element=document.createElement('div');element.classList.add('item');element.dataset.index=data.Id;let logo=document.createElement('div');logo.classList.add('item__logo');let img=document.createElement('img');let checkArticle=data.Article;let result;let findSlash=checkArticle.indexOf('/');if(findSlash!=-1){let check=checkArticle.split('');let final;let find=check.indexOf('/');check[find]='-';final=[...check];result=final.join('');checkArticle=result;}
img.setAttribute('src',`./images/photo-all/images/${checkArticle}.webp`);logo.append(img);element.append(logo)
let itemCode=document.createElement('div');itemCode.classList.add('item__code');let code=document.createElement('div');code.classList.add('code');code.append(data.Code);itemCode.append(code);element.append(itemCode);let itemArticle=document.createElement('div');itemArticle.classList.add('item__article');let article=document.createElement('div');article.classList.add('article');article.append(data.Article);itemArticle.append(article);element.append(itemArticle);let itemName=document.createElement('div');itemName.classList.add('item__title');let name=document.createElement('div');name.classList.add('title');name.append(data.Name);itemName.append(name);element.append(itemName);let status=document.createElement('div');status.classList.add('item__status');if(data.Status==='new'){element.append(status);}
let available=document.createElement('div');available.classList.add('item__available');available.innerText=data.Available;if(parseInt(data.Available)>0){available.classList.add('av_green');}else if(parseInt(data.Available)==0){available.classList.add('av_orange');}
element.append(available);return element}
disabledBtns(){this.searchBtn.classList.add('disabled');this.filterBtn.classList.add('disabled');this.newsBtn.classList.add('disabled');this.clearBtn.classList.add('disabled');this.getAllBtn.classList.add('disabled');this.logInBtn.classList.add('disabled');this.logOutBtn.classList.add('disabled');this.showCalcBnt.classList.add('disabled');}
removeDisabledBtns(){this.searchBtn.classList.remove('disabled');this.filterBtn.classList.remove('disabled');this.newsBtn.classList.remove('disabled');this.clearBtn.classList.remove('disabled');this.getAllBtn.classList.remove('disabled');this.logInBtn.classList.remove('disabled');this.logOutBtn.classList.remove('disabled');this.showCalcBnt.classList.remove('disabled');}}
module.exports=RenderGoods;},{"./index-charts":8,"./index-charts-availbl":5,"./index-charts-new":6,"./index-charts-reserved":7,"./login":9,"./scale-photo":11}],11:[function(require,module,exports){class ScalePhoto{constructor(){this.body=document.querySelector('body');this.scalePhotoContainer=document.querySelector('.scale-photo-container');this.scalePhoto=document.querySelector('.scale-img');this.scalePhotoClose=document.querySelector('.scale-photo-close');this.scalePhotoDownload=document.querySelector('.dwnld-img');this.photoAttribute=null;this.init();}
init(){document.addEventListener('click',(e)=>{let photo=e.target;if(photo.matches('.to-big')){this.photoAttribute=photo.getAttribute('src');this.showPhoto()}
this.scalePhotoClose.addEventListener('click',()=>this.close());})}
showPhoto(){this.body.style.overflow='hidden';this.scalePhotoContainer.style.display='flex';this.scalePhoto.setAttribute('src',this.photoAttribute);this.scalePhotoDownload.setAttribute('href',this.photoAttribute);}
close(){this.body.style.overflow='';this.scalePhotoContainer.style.display='none';this.scalePhoto.setAttribute('src','');this.scalePhotoDownload.setAttribute('href','-');}}
module.exports=ScalePhoto;},{}],12:[function(require,module,exports){class Searching{constructor(){this.container=document.querySelector('.main-section__body-container');this.elementSection=document.querySelector('.main-section__body-data');this.updata=document.querySelector('.updata');this.searchBtn=document.querySelector('.search-btn');this.filterBtn=document.querySelector('.filter-btn');this.newsBtn=document.querySelector('.news-btn');this.clearBtn=document.querySelector('.clear-btn');this.getAllBtn=document.querySelector('.get-all-btn');this.sampleLoader=document.querySelector('.loader');this.loader=document.querySelector('.main-section__body-loader');this.fullInfo=document.querySelector('.main-section__body-full-info');this.notFound=document.querySelector('.main-section__body-not-found');this.search=document.querySelector('.search-input');this.findTempArr=[];this.searchArr=[];this.findCount=null;this.singleElem=null;this.reservesAll=[];this.findTextData=[];this.init();}
init(){$.ajax({url:"https://script.google.com/macros/s/AKfycbxbKaaRcEABRWVU3lvb77XeHfrYAyoYlo0PaObwkF5QM_O_CNw4QBaChM1Wm9LYhziz/exec",method:"get",dataType:"json",success:(data)=>{sessionStorage.setItem('reserves',JSON.stringify(data.reservs));this.reservesAll=[...data.reservs];},error:(err)=>{console.log(`Reserves: ${err}`);},});this.searchBtn.addEventListener('click',()=>this.find());document.addEventListener('keyup',event=>{if(event.code==='Enter'||event.code==='NumpadEnter'){let check=this.search.value;check.trim();if(!check){return;}else{this.find();}}});this.clearBtn.addEventListener('click',()=>this.clear());this.newsBtn.addEventListener('click',()=>this.getNewGoods());this.filterBtn.addEventListener('click',()=>this.filtered());this.elementSection.addEventListener('click',(e)=>this.showItemInfo(e));}
find(){this.disabledBtns();this.updata.style.display='none';this.elementSection.innerHTML='';this.loader.style.display='flex';this.elementSection.style.display='none';this.fullInfo.style.display='none';this.notFound.style.display='none';this.sampleLoader.style.display='block';this.findTempArr=[...JSON.parse(sessionStorage.getItem('data'))];let searchStr=this.search.value.trim();if(searchStr.includes(',')){sessionStorage.setItem('current','find');let checkInputSearch=searchStr.split(',');let checkInputSearchTrim=checkInputSearch.map(e=>e.trim());this.searchArr=_.uniq([...checkInputSearchTrim]);let countElements=this.searchArr.length;let find;function findElems(searchElems,searchCount,searchArr){let result=[];for(let i=0;i<searchCount;i++){result.push(searchArr.filter(elem=>elem.Code==searchElems[i]));}
if(result.flat().length<1){for(let i=0;i<searchCount;i++){result.shift();}
for(let i=0;i<searchCount;i++){result.push(searchArr.filter(elem=>elem.Article==searchElems[i]));}}
if(result.flat().length<1){for(let i=0;i<searchCount;i++){result.shift();}
for(let i=0;i<searchCount;i++){result.push(searchArr.filter(elem=>elem.ArticleEPC==searchElems[i]));}}
if(result.flat().length<1){for(let i=0;i<searchCount;i++){result.shift();}
for(let i=0;i<searchCount;i++){result.push(searchArr.filter(elem=>elem.ShtrihCode==searchElems[i]));}}
return result;}
find=(findElems(this.searchArr,countElements,this.findTempArr));let flatted=find.flat(1);flatted.sort((a,b)=>a.Name>b.Name?1:-1);if(flatted.length<1){setTimeout(()=>{this.removeDisabledBtns();this.loader.style.display='none';this.elementSection.style.display='none';this.updata.style.display='none';this.notFound.style.display='flex'
this.search.value='';},200);return;}
this.elementSection.append(...flatted.map(e=>this.createElements(e)));setTimeout(()=>{this.removeDisabledBtns();this.loader.style.display='none';this.updata.style.display='block';this.elementSection.style.display='block';this.notFound.style.display='none'
this.search.value='';},200);}else if(!searchStr.includes(',')){this.fullInfo.innerHTML='';let close=document.createElement('div');close.classList.add('close-info');this.fullInfo.append(close);let closeInfoBtn=document.querySelector('.close-info');closeInfoBtn.addEventListener('click',()=>this.clearSection());document.addEventListener('keyup',event=>{if(event.code==='Escape'){if(this.singleElem==1){this.clearSection();}else{return;}}});let searchInput=searchStr;let find;function findElem(searchElem,searchArr){let result;result=searchArr.filter(elem=>elem.Code==searchElem);if(result.length<1){result=searchArr.filter(elem=>elem.Article==searchElem);}
if(result.length<1){result=searchArr.filter(elem=>elem.ArticleEPC==searchElem);}
if(result.length<1){result=searchArr.filter(elem=>elem.ShtrihCode==searchElem);}
if(result.length<1){return'-1'}
return result;}
find=(findElem(searchInput,this.findTempArr));if(find=='-1'){find=[];for(let i=0;i<this.findTempArr.length;i++){if(this.findTempArr[i].Name.toLowerCase().includes(searchInput.toLowerCase())){find.push(this.findTempArr[i]);}}
if(find.length<1){setTimeout(()=>{this.loader.style.display='none';this.updata.style.display='none';this.elementSection.style.display='none';this.notFound.style.display='flex'
this.fullInfo.style.display='none';this.removeDisabledBtns();this.search.value='';},200);return;}else{sessionStorage.setItem('current','findText');find.sort((a,b)=>a.Name>b.Name?1:-1);this.findTextData=[...find];this.elementSection.append(...find.map(e=>this.createElements(e)));M.toast({html:`Найдено ${find.length} товаров`,displayLength:1500,classes:'toast'});setTimeout(()=>{this.removeDisabledBtns();this.loader.style.display='none';this.updata.style.display='block';this.elementSection.style.display='block';this.notFound.style.display='none'
this.search.value='';},200);return;}}
this.fullInfo.append(this.createSingleElement(find[0]));setTimeout(()=>{this.loader.style.display='none';this.elementSection.style.display='none';this.updata.style.display='none';this.fullInfo.style.display='flex';this.notFound.style.display='none'
this.removeDisabledBtns();this.search.value='';this.isCollapse();let checkLogin=localStorage.getItem('auth');if(checkLogin=='1')$('.collapsible').collapsible();},200);}}
filtered(){sessionStorage.setItem('current','filter');this.disabledBtns();this.updata.style.display='none';this.elementSection.innerHTML='';this.loader.style.display='flex';this.elementSection.style.display='none';this.fullInfo.style.display='none';this.notFound.style.display='none';this.sampleLoader.style.display='block';this.findTempArr=[...JSON.parse(sessionStorage.getItem('data'))];let category=$('.Grope');let tradeMark=$('.TradeMark');let available=$('.Available');let result=[];let tempCategory=[];let tempTradeMark=[];let tempAvailable=[];if(category.val()!=='-'&&tradeMark.val()!=='-'&&available.val()!=='-'){if(available.val()=='yes'){tempAvailable.push(this.findTempArr.filter(elem=>elem.Available>0));}else if(available.val()=='no'){tempAvailable.push(this.findTempArr.filter(elem=>elem.Available<1));}
let first=tempAvailable.flat(1).filter(e=>e.Grope==category.val());let second=first.filter(e=>e.TradeMark==tradeMark.val());result=[...second];this.findCount=result.length;}else if(category.val()!=='-'&&tradeMark.val()!=='-'&&available.val()=='-'){tempCategory.push(this.findTempArr.filter(elem=>elem.Grope==category.val()));let first=tempCategory.flat(1).filter(e=>e.TradeMark==tradeMark.val());result=[...first];this.findCount=result.length;}else if(category.val()!=='-'&&available.val()!=='-'&&tradeMark.val()=='-'){if(available.val()=='yes'){tempAvailable.push(this.findTempArr.filter(elem=>elem.Available>0));}else if(available.val()=='no'){tempAvailable.push(this.findTempArr.filter(elem=>elem.Available<1));}
let first=tempAvailable.flat(1).filter(e=>e.Grope==category.val());result=[...first];this.findCount=result.length;}else if(tradeMark.val()!=='-'&&available.val()!=='-'&&category.val()=='-'){if(available.val()=='yes'){tempAvailable.push(this.findTempArr.filter(elem=>elem.Available>0));}else if(available.val()=='no'){tempAvailable.push(this.findTempArr.filter(elem=>elem.Available<1));}
let first=tempAvailable.flat(1).filter(e=>e.TradeMark==tradeMark.val());result=[...first];this.findCount=result.length;}else if(category.val()!=='-'&&tradeMark.val()=='-'&&available.val()=='-'){tempCategory.push(this.findTempArr.filter(elem=>elem.Grope==category.val()));let first=tempCategory.flat(1)
result=[...first];this.findCount=result.length;}else if(tradeMark.val()!=='-'&&category.val()=='-'&&available.val()=='-'){tempTradeMark.push(this.findTempArr.filter(elem=>elem.TradeMark==tradeMark.val()));let first=tempTradeMark.flat(1)
result=[...first];this.findCount=result.length;}else if(available.val()!=='-'&&tradeMark.val()=='-'&&category.val()=='-'){if(available.val()=='yes'){tempAvailable.push(this.findTempArr.filter(elem=>elem.Available>0));}else if(available.val()=='no'){tempAvailable.push(this.findTempArr.filter(elem=>elem.Available<1));}
let first=tempAvailable.flat(1);result=[...first];this.findCount=result.length;}else{setTimeout(()=>{this.removeDisabledBtns();this.updata.style.display='none';this.loader.style.display='none';this.elementSection.style.display='none';this.notFound.style.display='flex'
result=[];tempCategory=[];tempTradeMark=[];tempAvailable=[];this.findCount=null;},200);}
if(result.length<1){setTimeout(()=>{this.removeDisabledBtns();this.loader.style.display='none';this.elementSection.style.display='none';this.updata.style.display='none';this.notFound.style.display='flex'
result=[];tempCategory=[];tempTradeMark=[];tempAvailable=[];this.findCount=null;},200);}else{result.sort((a,b)=>a.Name>b.Name?1:-1);this.elementSection.append(...result.map(e=>this.createElements(e)));M.toast({html:`Найдено ${this.findCount} товаров`,displayLength:1500,classes:'toast'})
setTimeout(()=>{this.loader.style.display='none';this.updata.style.display='block';this.elementSection.style.display='block';this.notFound.style.display='none'
this.removeDisabledBtns();result=[];tempCategory=[];tempTradeMark=[];tempAvailable=[];this.findCount=null;},200);}}
clear(){this.disabledBtns();this.updata.style.display='none';this.loader.style.display='flex';this.elementSection.style.display='none';this.fullInfo.style.display='none';this.notFound.style.display='none'
this.sampleLoader.style.display='block';sessionStorage.setItem('current','fifty')
this.search.value='';setTimeout(()=>{this.elementSection.innerHTML='';let fullData=[...JSON.parse(sessionStorage.getItem('data'))];fullData.reverse();let temporaryGoods=[];for(let i=19;i>=0;i--){temporaryGoods.push(fullData[i])}
let showGoods=temporaryGoods.sort((a,b)=>a.Name>b.Name?1:-1);this.elementSection.append(...showGoods.map(e=>this.createElements(e)));M.toast({html:`Последние 20 товаров`,displayLength:1500,classes:'toast'});this.updata.style.display='block';this.loader.style.display='none';this.elementSection.style.display='block';this.removeDisabledBtns();},200);}
clearSection(){let currentSection=sessionStorage.getItem('current');if(currentSection=='fifty'){this.disabledBtns();this.updata.style.display='none';this.loader.style.display='flex';this.elementSection.style.display='none';this.fullInfo.style.display='none';this.notFound.style.display='none'
this.sampleLoader.style.display='block';sessionStorage.setItem('current','fifty')
this.search.value='';setTimeout(()=>{this.elementSection.innerHTML='';let fullData=[...JSON.parse(sessionStorage.getItem('data'))];fullData.reverse();let temporaryGoods=[];for(let i=19;i>=0;i--){temporaryGoods.push(fullData[i])}
let showGoods=temporaryGoods.sort((a,b)=>a.Name>b.Name?1:-1);this.elementSection.append(...showGoods.map(e=>this.createElements(e)));this.loader.style.display='none';this.updata.style.display='block';this.elementSection.style.display='block';this.removeDisabledBtns();},200);}else if(currentSection=='new'){this.getNewGoods();}else if(currentSection=='sales'){this.getSalesGoods();}else if(currentSection=='find'){sessionStorage.setItem('current','find');this.disabledBtns();this.updata.style.display='none';this.elementSection.innerHTML='';this.loader.style.display='flex';this.elementSection.style.display='none';this.fullInfo.style.display='none';this.notFound.style.display='none';let countElements=this.searchArr.length;let find;function findElems(searchElems,searchCount,searchArr){let result=[];for(let i=0;i<searchCount;i++){result.push(searchArr.filter(elem=>elem.Code==searchElems[i]));}
if(result.flat().length<1){for(let i=0;i<searchCount;i++){result.shift();}
for(let i=0;i<searchCount;i++){result.push(searchArr.filter(elem=>elem.Article==searchElems[i]));}}
if(result.flat().length<1){for(let i=0;i<searchCount;i++){result.shift();}
for(let i=0;i<searchCount;i++){result.push(searchArr.filter(elem=>elem.ArticleEPC==searchElems[i]));}}
if(result.flat().length<1){for(let i=0;i<searchCount;i++){result.shift();}
for(let i=0;i<searchCount;i++){result.push(searchArr.filter(elem=>elem.ShtrihCode==searchElems[i]));}}
return result;}
find=(findElems(this.searchArr,countElements,this.findTempArr));let flatted=find.flat(1);flatted.sort((a,b)=>a.Name>b.Name?1:-1);if(flatted.length<1){setTimeout(()=>{this.updata.style.display='none';this.loader.style.display='none';this.elementSection.style.display='none';this.notFound.style.display='flex'
this.removeDisabledBtns();this.search.value='';},200);return;}
this.elementSection.append(...flatted.map(e=>this.createElements(e)));setTimeout(()=>{this.loader.style.display='none';this.updata.style.display='block';this.elementSection.style.display='block';this.notFound.style.display='none'
this.removeDisabledBtns();this.search.value='';},200)}else if(currentSection=='all'){sessionStorage.setItem('current','all')
this.disabledBtns();this.elementSection.innerHTML='';this.loader.style.display='flex';this.updata.style.display='none';this.elementSection.style.display='none';this.fullInfo.style.display='none';this.notFound.style.display='none';setTimeout(()=>{this.elementSection.innerHTML='';let response=JSON.parse(sessionStorage.getItem('data'));response.sort((a,b)=>a.Name>b.Name?1:-1);this.elementSection.append(...response.map(e=>this.createElements(e)));this.loader.style.display='none';this.elementSection.style.display='block';this.removeDisabledBtns();this.loader.style.display='none';this.updata.style.display='block';this.elementSection.style.display='block';this.notFound.style.display='none'},200);}else if(currentSection=='filter'){this.filtered()}else if(currentSection=='findText'){sessionStorage.setItem('current','findText');this.disabledBtns();this.updata.style.display='none';this.elementSection.innerHTML='';this.loader.style.display='flex';this.elementSection.style.display='none';this.fullInfo.style.display='none';this.notFound.style.display='none';this.elementSection.append(...this.findTextData.map(e=>this.createElements(e)));M.toast({html:`Найдено ${this.findTextData.length} товаров`,displayLength:1500,classes:'toast'});setTimeout(()=>{this.loader.style.display='none';this.updata.style.display='block';this.elementSection.style.display='block';this.notFound.style.display='none'
this.removeDisabledBtns();this.search.value='';},200)}
this.singleElem=null;}
getNewGoods(){sessionStorage.setItem('current','new')
this.disabledBtns();this.updata.style.display='none';this.elementSection.innerHTML='';this.loader.style.display='flex';this.elementSection.style.display='none';this.fullInfo.style.display='none';this.notFound.style.display='none';this.sampleLoader.style.display='block';let temporaryArr=[...JSON.parse(sessionStorage.getItem('data'))];let find=[];find.push(temporaryArr.filter(elem=>elem.Status=='new'));let flatted=find.flat(1);flatted.sort((a,b)=>a.Name>b.Name?1:-1);this.elementSection.append(...flatted.map(e=>this.createElements(e)));M.toast({html:`Найдено ${flatted.length} товаров`,displayLength:1500,classes:'toast'});setTimeout(()=>{this.updata.style.display='block';this.loader.style.display='none';this.elementSection.style.display='block';this.notFound.style.display='none'
this.removeDisabledBtns();this.search.value='';},200)}
showItemInfo(element){let currentIndex=null;let currentElement=element.target;if(currentElement.matches('.item')){currentIndex=currentElement.dataset.index;}else if(currentElement.matches('img')||currentElement.matches('.description')||currentElement.matches('.code')||currentElement.matches('.article')||currentElement.matches('.title')){currentIndex=currentElement.parentElement.parentElement.dataset.index;}else if(currentElement.matches('.item__logo')||currentElement.matches('.item__code')||currentElement.matches('.item__article')||currentElement.matches('.item__title')){currentIndex=currentElement.parentElement.dataset.index;}else return;this.disabledBtns();this.fullInfo.innerHTML='';this.loader.style.display='flex';this.updata.style.display='none';this.elementSection.style.display='none';this.fullInfo.style.display='none';this.notFound.style.display='none';this.sampleLoader.style.display='block';let close=document.createElement('div');close.classList.add('close-info');this.fullInfo.append(close);let closeInfoBtn=document.querySelector('.close-info');closeInfoBtn.addEventListener('click',()=>this.clearSection());document.addEventListener('keyup',event=>{if(event.code==='Escape'){if(this.singleElem==1){this.clearSection();}else{return;}}});let temporaryArr=[...JSON.parse(sessionStorage.getItem('data'))];let find=[];find.push(temporaryArr.filter(elem=>elem.Id==currentIndex));let flatted=find.flat(1);this.fullInfo.append(this.createSingleElement(flatted[0]));setTimeout(()=>{this.loader.style.display='none';this.updata.style.display='none';this.elementSection.style.display='none';this.fullInfo.style.display='flex';this.notFound.style.display='none'
this.removeDisabledBtns();this.search.value='';let checkLogin=localStorage.getItem('auth');if(checkLogin=='1')$('.collapsible').collapsible();this.isCollapse();},100);}
isCollapse(){let collapsible=document.querySelector('.collapsible');let checkLogin=localStorage.getItem('auth');collapsible.addEventListener('click',()=>{if(checkLogin!='1'){Swal.fire({icon:"warning",title:"Нужна авторизация!",showConfirmButton:false,timer:1500});return}})}
createElements(data){let element=document.createElement('div');element.classList.add('item');element.dataset.index=data.Id;let logo=document.createElement('div');logo.classList.add('item__logo');let img=document.createElement('img');let checkArticle=data.Article;let result;let findSlash=checkArticle.indexOf('/');if(findSlash!=-1){let check=checkArticle.split('');let final;let find=check.indexOf('/');check[find]='-';final=[...check];result=final.join('');checkArticle=result;}
img.setAttribute('src',`./images/photo-all/images/${checkArticle}.webp`);logo.append(img);element.append(logo)
let itemCode=document.createElement('div');itemCode.classList.add('item__code');let code=document.createElement('div');code.classList.add('code');code.append(data.Code);itemCode.append(code);element.append(itemCode);let itemArticle=document.createElement('div');itemArticle.classList.add('item__article');let article=document.createElement('div');article.classList.add('article');article.append(data.Article);itemArticle.append(article);element.append(itemArticle);let itemName=document.createElement('div');itemName.classList.add('item__title');let name=document.createElement('div');name.classList.add('title');name.append(data.Name);itemName.append(name);element.append(itemName);let status=document.createElement('div');status.classList.add('item__status');if(data.Status==='new'){element.append(status);}
let available=document.createElement('div');available.classList.add('item__available');available.innerText=data.Available;if(parseInt(data.Available)>0){available.classList.add('av_green');}else if(parseInt(data.Available)==0){available.classList.add('av_orange');}
element.append(available);return element}
createSingleElement(elem){let finaly=document.createElement('div');finaly.classList.add('summary-data');finaly.dataset.index=elem.Id;let newPos=document.createElement('div');newPos.classList.add('new-position');newPos.textContent='НОВИНКА';if(elem.Status==='new'){newPos.classList.add('pos-act');}
let fake=document.createElement('div');fake.classList.add('fake');let header=document.createElement('div');header.classList.add('main-section__body-full-info-header');let infoLogo=document.createElement('div');infoLogo.classList.add('info-logo');let img=document.createElement('img');let checkArticle=elem.Article;let result;let findSlash=checkArticle.indexOf('/');if(findSlash!=-1){let check=checkArticle.split('');let final;let find=check.indexOf('/');check[find]='-';final=[...check];result=final.join('');checkArticle=result;}
img.setAttribute('src',`./images/photo-all/images/${checkArticle}.webp`);img.classList.add('to-big');infoLogo.append(img);let infoName=document.createElement('div');infoName.classList.add('info-name');infoName.textContent=`${elem.Name}`;header.append(infoLogo);header.append(infoName);let body=document.createElement('div');body.classList.add('main-section__body-full-info-body');let section=document.createElement('div');section.classList.add('section');let info1=document.createElement('div');info1.classList.add('info');let groupe1=document.createElement('div');groupe1.classList.add('groupe');let infoCode=document.createElement('div');infoCode.classList.add('info-code');infoCode.classList.add('inf');infoCode.textContent='Код товара:';let dataCode=document.createElement('div');dataCode.classList.add('data-code');dataCode.classList.add('dat');dataCode.textContent=`${elem.Code}`;groupe1.append(infoCode);groupe1.append(dataCode);info1.append(groupe1);let info2=document.createElement('div');info2.classList.add('info');let groupe2=document.createElement('div');groupe2.classList.add('groupe');let infoArticle=document.createElement('div');infoArticle.classList.add('info-article');infoArticle.classList.add('inf');infoArticle.textContent='Артикул:';let dataArticle=document.createElement('div');dataArticle.classList.add('data-article');dataArticle.classList.add('dat');dataArticle.textContent=`${elem.Article}`;groupe2.append(infoArticle);groupe2.append(dataArticle);info2.append(groupe2);let info3=document.createElement('div');info3.classList.add('info');let groupe3=document.createElement('div');groupe3.classList.add('groupe');let infoShtrih=document.createElement('div');infoShtrih.classList.add('info-shtrih');infoShtrih.classList.add('inf');infoShtrih.textContent='Штрихкод:';let dataShtrih=document.createElement('div');dataShtrih.classList.add('data-shtrih');dataShtrih.classList.add('dat');dataShtrih.textContent=`${elem.ShtrihCode}`;groupe3.append(infoShtrih);groupe3.append(dataShtrih);info3.append(groupe3);let info4=document.createElement('div');info4.classList.add('info');let groupe4=document.createElement('div');groupe4.classList.add('groupe');let infoUktz=document.createElement('div');infoUktz.classList.add('info-uktz');infoUktz.classList.add('inf');infoUktz.textContent='Код УКТЗ:';let dataUktz=document.createElement('div');dataUktz.classList.add('data-uktz');dataUktz.classList.add('dat');dataUktz.textContent=`${elem.UktzCode}`;groupe4.append(infoUktz);groupe4.append(dataUktz);info4.append(groupe4);let info5=document.createElement('div');info5.classList.add('info');let groupe5=document.createElement('div');groupe5.classList.add('groupe');let infoTM=document.createElement('div');infoTM.classList.add('info-tm');infoTM.classList.add('inf');infoTM.textContent='Торговая марка:';let dataTM=document.createElement('div');dataTM.classList.add('data-tm');dataTM.classList.add('dat');dataTM.textContent=`${elem.TradeMark}`;groupe5.append(infoTM);groupe5.append(dataTM);info5.append(groupe5);let info6=document.createElement('div');info6.classList.add('info');let groupe6=document.createElement('div');groupe6.classList.add('groupe');let infoUnit=document.createElement('div');infoUnit.classList.add('info-unit');infoUnit.classList.add('inf');infoUnit.textContent='Ед.измерения:';let dataUnit=document.createElement('div');dataUnit.classList.add('data-unit');dataUnit.classList.add('dat');dataUnit.textContent=`${elem.Unit}`;groupe6.append(infoUnit);groupe6.append(dataUnit);info6.append(groupe6);let info7=document.createElement('div');info7.classList.add('info');let groupe7=document.createElement('div');groupe7.classList.add('groupe');let infoCountry=document.createElement('div');infoCountry.classList.add('info-country');infoCountry.classList.add('inf');infoCountry.textContent='Страна:';let dataCountry=document.createElement('div');dataCountry.classList.add('data-country');dataCountry.classList.add('dat');dataCountry.textContent=`${elem.Country}`;groupe7.append(infoCountry);groupe7.append(dataCountry);info7.append(groupe7);let info8=document.createElement('div');info8.classList.add('info');let groupe8=document.createElement('div');groupe8.classList.add('groupe');let infoMaterial=document.createElement('div');infoMaterial.classList.add('info-material');infoMaterial.classList.add('inf');infoMaterial.textContent='Материал:';let dataMaterial=document.createElement('div');dataMaterial.classList.add('data-material');dataMaterial.classList.add('dat');dataMaterial.textContent=`${elem.Material}`;groupe8.append(infoMaterial);groupe8.append(dataMaterial);info8.append(groupe8);let info9=document.createElement('div');info9.classList.add('info');let groupe9=document.createElement('div');groupe9.classList.add('groupe');let infoLen=document.createElement('div');infoLen.classList.add('info-length');infoLen.classList.add('inf');infoLen.textContent='Длинна(см):';let dataLen=document.createElement('div');dataLen.classList.add('data-length');dataLen.classList.add('dat');dataLen.textContent=`${elem.LengthSM}`;groupe9.append(infoLen);groupe9.append(dataLen);info9.append(groupe9);let info10=document.createElement('div');info10.classList.add('info');let groupe10=document.createElement('div');groupe10.classList.add('groupe');let infoWid=document.createElement('div');infoWid.classList.add('info-width');infoWid.classList.add('inf');infoWid.textContent='Ширина(см):';let dataWid=document.createElement('div');dataWid.classList.add('data-width');dataWid.classList.add('dat');dataWid.textContent=`${elem.WidthSM}`;groupe10.append(infoWid);groupe10.append(dataWid);info10.append(groupe10);let info11=document.createElement('div');info11.classList.add('info');let groupe11=document.createElement('div');groupe11.classList.add('groupe');let infoHet=document.createElement('div');infoHet.classList.add('info-height');infoHet.classList.add('inf');infoHet.textContent='Высота(см):';let dataHet=document.createElement('div');dataHet.classList.add('data-height');dataHet.classList.add('dat');dataHet.textContent=`${elem.HeightSM}`;groupe11.append(infoHet);groupe11.append(dataHet);info11.append(groupe11);let info12=document.createElement('div');info12.classList.add('info');let groupe12=document.createElement('div');groupe12.classList.add('groupe');let infoDiar=document.createElement('div');infoDiar.classList.add('info-diametr');infoDiar.classList.add('inf');infoDiar.textContent='Диаметр(см):';let dataDiar=document.createElement('div');dataDiar.classList.add('data-diametr');dataDiar.classList.add('dat');dataDiar.textContent=`${elem.DiameterSM}`;groupe12.append(infoDiar);groupe12.append(dataDiar);info12.append(groupe12);let info15=document.createElement('div');info15.classList.add('info');let groupe15=document.createElement('div');groupe15.classList.add('groupe');let infoWeit=document.createElement('div');infoWeit.classList.add('info-weight');infoWeit.classList.add('inf');infoWeit.textContent='Вес(кг):';let dataWeit=document.createElement('div');dataWeit.classList.add('data-weight');dataWeit.classList.add('dat');dataWeit.textContent=`${elem.WeightKG}`;groupe15.append(infoWeit);groupe15.append(dataWeit);info15.append(groupe15);let info151=document.createElement('div');info151.classList.add('info');let groupe151=document.createElement('div');groupe151.classList.add('groupe');let infoBox=document.createElement('div');infoBox.classList.add('info-box');infoBox.classList.add('inf');infoBox.textContent='Штук в коробке:';let dataBox=document.createElement('div');dataBox.classList.add('data-box');dataBox.classList.add('dat');dataBox.textContent=`${elem.BoxCount}`;groupe151.append(infoBox);groupe151.append(dataBox);info151.append(groupe151);let info13=document.createElement('div');info13.classList.add('info');let groupe13=document.createElement('div');groupe13.classList.add('groupe');let infoGr=document.createElement('div');infoGr.classList.add('info-groupe');infoGr.classList.add('inf');infoGr.textContent='Группа:';let dataGr=document.createElement('div');dataGr.classList.add('data-groupe');dataGr.classList.add('dat');dataGr.textContent=`${elem.Grope}`;groupe13.append(infoGr);groupe13.append(dataGr);info13.append(groupe13);let info131=document.createElement('div');info131.classList.add('info');let groupe131=document.createElement('div');groupe131.classList.add('groupe');let infoCollect=document.createElement('div');infoCollect.classList.add('info-collection');infoCollect.classList.add('inf');infoCollect.textContent='Коллекция:';let dataCollect=document.createElement('div');dataCollect.classList.add('data-groupe');dataCollect.classList.add('dat');dataCollect.textContent=`${elem.Collection}`;groupe131.append(infoCollect);groupe131.append(dataCollect);info131.append(groupe131);let info16=document.createElement('div');info16.classList.add('info');let groupe16=document.createElement('div');groupe16.classList.add('groupe');let infoEPC=document.createElement('div');infoEPC.classList.add('info-artEPC');infoEPC.classList.add('inf');infoEPC.textContent='Артикул ЕПЦ:';let dataEPC=document.createElement('div');dataEPC.classList.add('data-artEpc');dataEPC.classList.add('dat');dataEPC.textContent=`${elem.ArticleEPC}`;groupe16.append(infoEPC);groupe16.append(dataEPC);info16.append(groupe16);let info14=document.createElement('div');info14.classList.add('info');let groupe14=document.createElement('div');groupe14.classList.add('groupe');let infoNl=document.createElement('div');infoNl.classList.add('info-artNl');infoNl.classList.add('inf');infoNl.textContent='Артикул НЛ:';let dataNl=document.createElement('div');dataNl.classList.add('data-artNl');dataNl.classList.add('dat');dataNl.textContent=`${elem.ArticleNL}`;groupe14.append(infoNl);groupe14.append(dataNl);info14.append(groupe14);let info17=document.createElement('div');info17.classList.add('info');let groupe17=document.createElement('div');groupe17.classList.add('groupe');let infoASHN=document.createElement('div');infoASHN.classList.add('info-artASHN');infoASHN.classList.add('inf');infoASHN.textContent='Артикул Ашан:';let dataASHN=document.createElement('div');dataASHN.classList.add('data-artASHN');dataASHN.classList.add('dat');dataASHN.textContent=`${elem.ArticleASHN}`;groupe17.append(infoASHN);groupe17.append(dataASHN);info17.append(groupe17);let info18=document.createElement('div');info18.classList.add('info');let groupe18=document.createElement('div');groupe18.classList.add('groupe');let infoTAVR=document.createElement('div');infoTAVR.classList.add('info-artTAVR');infoTAVR.classList.add('inf');infoTAVR.textContent='Артикул Таврия:';let dataTAVR=document.createElement('div');dataTAVR.classList.add('data-artASHN');dataTAVR.classList.add('dat');dataTAVR.textContent=`${elem.ArticleTAVR}`;groupe18.append(infoTAVR);groupe18.append(dataTAVR);info18.append(groupe18);let info19=document.createElement('div');info19.classList.add('info');let groupe19=document.createElement('div');groupe19.classList.add('groupe');let infoNOV=document.createElement('div');infoNOV.classList.add('info-artNOV');infoNOV.classList.add('inf');infoNOV.textContent='Артикул Новус:';let dataNOV=document.createElement('div');dataNOV.classList.add('data-artNOV');dataNOV.classList.add('dat');dataNOV.textContent=`${elem.ArticleNOV}`;groupe19.append(infoNOV);groupe19.append(dataNOV);info19.append(groupe19);let info20=document.createElement('div');info20.classList.add('info');let groupe20=document.createElement('div');groupe20.classList.add('groupe');let infoPrc=document.createElement('div');infoPrc.classList.add('info-price');infoPrc.classList.add('inf');infoPrc.textContent='Цена(база):';let dataPrc=document.createElement('div');dataPrc.classList.add('data-price');dataPrc.classList.add('dat');dataPrc.textContent=`${elem.Price}`;groupe20.append(infoPrc);groupe20.append(dataPrc);info20.append(groupe20);let info21=document.createElement('div');info21.classList.add('info');let groupe21=document.createElement('div');groupe21.classList.add('groupe');let infoAvbl=document.createElement('div');infoAvbl.classList.add('info-available');infoAvbl.classList.add('inf');infoAvbl.textContent='Доступно(шт):';let dataAvbl=document.createElement('div');dataAvbl.classList.add('data-available');dataAvbl.classList.add('dat');dataAvbl.style.color='green';dataAvbl.textContent=`${elem.Available}`;groupe21.append(infoAvbl);groupe21.append(dataAvbl);info21.append(groupe21);section.append(info1);section.append(info2);section.append(info3);section.append(info4);section.append(info5);section.append(info6);section.append(info7);section.append(info8);section.append(info9);section.append(info10);section.append(info11);section.append(info12);section.append(info15);section.append(info151);section.append(info13);section.append(info131);section.append(info16);section.append(info17);section.append(info18);section.append(info19);section.append(info20);section.append(info21);let filterElemArr=this.reservesAll.filter(f=>f.CodeR==elem.Code);let reservSummaryCount=filterElemArr.reduce(function(sum,current){return sum+parseInt(current.CountR);},0);let collapsElem=document.createElement('ul');collapsElem.classList.add('collapsible');let collapsElemLi=document.createElement('li');let collapsElemLiHead=document.createElement('div');collapsElemLiHead.classList.add('collapsible-header');let ElemLiHeadI=document.createElement('i');ElemLiHeadI.classList.add('material-icons');ElemLiHeadI.append('warning');let ElemLiHeadTitle=document.createElement('span');ElemLiHeadTitle.append('На резерве:');let ElemLiHeadTitleCount=document.createElement('span');ElemLiHeadTitleCount.classList.add('red-span')
ElemLiHeadTitleCount.append(reservSummaryCount);ElemLiHeadTitleCount.style.color='red';collapsElemLiHead.append(ElemLiHeadI);collapsElemLiHead.append(ElemLiHeadTitle);collapsElemLiHead.append(ElemLiHeadTitleCount);let collapsElemLiBody=document.createElement('div');collapsElemLiBody.classList.add('collapsible-body');let noReservs=document.createElement('div');noReservs.classList.add('no-reservs');noReservs.append('Нет резервов');collapsElemLiBody.append(noReservs);let yesReservs=document.createElement('div');yesReservs.classList.add('yes-reservs');yesReservs.innerHTML='';yesReservs.append(...filterElemArr.map(r=>createReservs(r)));function createReservs(reservElem){let resElement=document.createElement('div');resElement.classList.add('reserv');let reservCompName=document.createElement('div');reservCompName.classList.add('reserv-company');reservCompName.append(reservElem.CompanyR);resElement.append(reservCompName);let reservCompCount=document.createElement('div');reservCompCount.classList.add('reserv-count');reservCompCount.append(reservElem.CountR);resElement.append(reservCompCount);return resElement;}
collapsElemLiBody.append(yesReservs);if(filterElemArr.length<1){yesReservs.style.display='none';}else if(filterElemArr.length>0){noReservs.style.display='none';}
collapsElemLi.append(collapsElemLiHead);collapsElemLi.append(collapsElemLiBody);collapsElem.append(collapsElemLi);body.append(section);body.append(collapsElem);finaly.append(newPos);finaly.append(header);finaly.append(body);this.singleElem=1;return finaly;}
disabledBtns(){this.container.style.backgroundImage='linear-gradient(to bottom, snow, snow)';this.searchBtn.classList.add('disabled');this.filterBtn.classList.add('disabled');this.newsBtn.classList.add('disabled');this.clearBtn.classList.add('disabled');this.getAllBtn.classList.add('disabled');}
removeDisabledBtns(){this.container.style.backgroundImage='linear-gradient(to bottom, #f3f4fa, #e9edff)';this.searchBtn.classList.remove('disabled');this.filterBtn.classList.remove('disabled');this.newsBtn.classList.remove('disabled');this.clearBtn.classList.remove('disabled');this.getAllBtn.classList.remove('disabled');}}
module.exports=Searching;},{}],13:[function(require,module,exports){class ShowAsside{constructor(){this.showAssideBtn=document.querySelector('.show-asside');this.show=null;this.init();}
init(){this.showAssideBtn.addEventListener('click',this.assideShowHide);}
assideShowHide(){let assideMenu=document.querySelector('.asside');let header=document.querySelector('.main-section__header');let firstLine=document.querySelector('.show-asside .first-line');let secondLine=document.querySelector('.show-asside .second-line');let thirdLine=document.querySelector('.show-asside .third-line');let loginBtn=document.querySelector('.login-btn');let mainSection=document.querySelector('.main-section');let body=document.querySelector('body');if(this.show==null){this.show='show';assideMenu.style.transform='translate(0, 0)';header.style.marginLeft='200px'
firstLine.classList.add('first-line-hide');secondLine.classList.add('second-line-hide');thirdLine.classList.add('third-line-hide');loginBtn.style.display='none';mainSection.style.overflow='hidden';body.style.overflow='hidden';}else{this.show=null;assideMenu.style.transform='translate(-205px, 55px)';header.style.marginLeft='0'
firstLine.classList.remove('first-line-hide');secondLine.classList.remove('second-line-hide');thirdLine.classList.remove('third-line-hide');loginBtn.style.display='block';mainSection.style.overflow='scroll';body.style.overflow='scroll';}}}
module.exports=ShowAsside;},{}],14:[function(require,module,exports){class Weather{constructor(){this.weather=document.querySelector('.weather');this.weatherCity=document.querySelector('.weather__city');this.weatherTemp=document.querySelector('.weather__temperature');this.weatherImg=document.querySelector('.weather__img');this.showWeather();setInterval(()=>{this.showWeather();},1800000)}
showWeather(){$.ajax({url:"https://api.weatherapi.com/v1/current.json?key=5f6ae58e18e644888bf182855242904&q=Днепропетровск",method:"get",crossDomain:true,dataType:"json",success:(data)=>{let location=data.location.name;let temperature=data.current.temp_c;let icon=data.current.condition.icon;this.weatherCity.textContent=location.slice(0,5);this.weatherTemp.textContent=`${temperature}°C`;this.weatherImg.src=icon;this.weather.style.display='flex';},error:(err)=>{console.log(err.message)},});}}
module.exports=Weather;},{}]},{},[1])